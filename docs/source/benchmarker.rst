.. _local-benchmarking-setup:

Local Benchmarking Setup
========================

This documentation provides instructions for setting up your local environment to benchmark workflows generated by the Worklomics web platform.

1. Installing Python
-----------------

1. Download the latest version of Python from the official website:

   - `Python Downloads <https://www.python.org/downloads/>`_

2. Follow the installation instructions for your operating system. Make sure to add Python to your systemâ€™s path.

2. Setting Up a Virtual Environment
--------------------------------

After installing Python, set up a virtual environment for project dependencies:

.. code-block:: bash

   python3 -m venv worklomics-env
   source worklomics-env/bin/activate  # On Windows use `worklomics-env\Scripts\activate`

3. Installing workflomics-benchmarker
----------------------------------

With the virtual environment activated, install the `workflomics-benchmarker`:

.. code-block:: bash

   pip install workflomics-benchmarker

4. Supporting Containerization
----------------------------

Workflows generated by Worklomics are containerized. To run these workflows, you will need to install Docker or Singularity/Apptainer. If you already have Docker or Singularity/Apptainer installed, you can skip this step, otherwise follow the instructions below to install Docker or Singularity/Apptainer.

4.1. Installing Docker
^^^^^^^^^^^^^^^^^^^^^

Docker supports containerized environments:

1. Download Docker Desktop from the official website:

   - `Docker Downloads <https://www.docker.com/products/docker-desktop>`_

2. Install Docker Desktop by following the installation guide for your OS.

   - Ensure Docker version 24.0.6 (build ed223bc) is installed by running:

.. code-block:: bash

   docker --version

4.2. Installing Singularity/Apptainer
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Alternatively, you can use Singularity (now Apptainer) for containerization:

1. Follow the installation guide on the official Apptainer documentation:

   - `Apptainer Installation Guide <https://apptainer.org/docs/user/main/quick_start.html#installation>`_

   - Ensure you have version 1.1.6 installed by running:

.. code-block:: bash

   singularity version  # or `apptainer version` based on your installation

5. Running Workflows
-----------------

Once you have workflows downloaded from Worklomics:

1. Unzip the workflows package.

2. Navigate to the folder containing the unzipped workflows.

3. Execute the benchmark command in the terminal:

   - To benchmark in the current directory:

   .. code-block:: bash

      workflomics benchmark .

   - To benchmark in a different directory:

   .. code-block:: bash

      workflomics benchmark path-to-dir

.. note:: Replace `path-to-dir` with the actual path to the directory containing your Worklomics workflows.


After executing the benchmark command, the process will produce a `workflow-benchmarks.json` file within the directory where the benchmarking occurred. This file encapsulates the detailed results from your benchmarking session, including performance metrics and comparative analyses for each workflow evaluated.

Visualizing Benchmark Results
------------------------------

Upon uploading your benchmark results to the Workflomics platform, you gain access to an interactive visualization tool that allows you to analyze and understand the performance of different workflows comprehensively. 

1. **Upload Your Benchmark Results**: To take advantage of this feature, first, navigate to the Workflomics Benchmark Upload Page:

   - `Workflomics Benchmarks Upload <http://145.38.190.48/benchmarks>`_

2. **Follow the Upload Instructions**: Upload your `workflow-benchmarks.json` file by following the on-screen instructions. This simple process enables you to contribute your findings to the community database.

3. **Access Interactive Visualizations**: Once your data is uploaded, you will be directed to a page where you can interactively explore the benchmark results. This tool helps in identifying the most efficient workflows by visually comparing performance metrics, thus facilitating a more informed decision-making process for selecting optimal workflows for your research needs.

The ability to visualize benchmark results not only enhances your understanding of workflow performances but also promotes a collaborative effort to improve and optimize bioinformatics workflows. By sharing your results, you contribute to a growing repository of knowledge that benefits the entire Workflomics community.

.. note:: Please ensure that any data you upload is free of sensitive or proprietary information, as it will be accessible to other users for analysis and comparison purposes.
